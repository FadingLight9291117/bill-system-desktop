<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
  <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"> -->
  <title>Hello World!</title>
  <link rel="stylesheet" href='./static/css/mvp.css'>
</head>

<body>
  <main>
    <section>
      <aside>
        <h2>记一笔</h2>
        <div>
          <label for="money">金额</label>
          <input type="number" id="money" value="">
        </div>
        <div>
          <label for="cls1">大类</label>
          <select id="cls1" name="cls1">
            <option value="">--请选择一项--</option>
          </select>
        </div>
        <div>
          <label for="cls2">小类</label>
          <select id="cls2" name="cls2">
            <option value="">--请选择一项--</option>
          </select>
        </div>
        <button id="addBill">提交</button>
        <button id='cancle'>重置</button>
      </aside>
    </section>

  </main>
</body>
<style>
  #money {
    width: 70%;
  }
  #cls2,
  #cls1 {
    width: 80%;
  }
</style>
<script>
  // get data
  const cls1 = ["食品", "饮料", "衣服"];
  const cls2 = [
    ["早餐", "午餐"],
    ["奶茶", "可乐"],
    ["上衣", "鞋子"],
  ];

  // get element
  const addBill = document.getElementById("addBill");
  const cancle = document.getElementById("cancle");
  const cls1Elem = document.getElementById("cls1");
  const cls2Elem = document.getElementById("cls2");

  // set data & set listening & store data
  addBill.addEventListener("click", submitBillAction);
  cancle.addEventListener("click", resetBill);

  // set data
  setCls(cls1Elem, cls1);
  cls1Elem.addEventListener("change", (e) => {
    const cls1Val = cls1Elem.value;
    setCls(cls2Elem, cls2[cls1Val]);
  });


  // some function
  function setCls(elem, clss) {
    clss.forEach((cls, idx) => {
      let option = `<option value="${idx}">${cls}</option>`;
      elem.innerHTML += option;
    })

  }

  function submitBillAction() {
    const money = document.getElementById("money").value;
    const cls1Val = document.getElementById("cls1").value;
    const cls2Val = document.getElementById("cls2").value;
    if (money == "" || cls1Val == "" || cls2Val == "") {
      console.log('请填完整');
    }
    console.log(`money: ${money}\ncls1: ${cls1[cls1Val]}\ncls2: ${cls2[cls1Val][cls2Val]}`);
    resetBill();
  }

  function resetBill() {
    const money = document.getElementById("money");
    const cls1 = document.getElementById("cls1");
    const cls2 = document.getElementById("cls2");
    money.value = "";
    cls1.value = "";
    cls2.value = "";
  }
</script>

<script src="./renderer.js"></script>

</html>